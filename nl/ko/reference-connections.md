---
copyright:
  years: 2016,2018
lastupdated: "2018-06-13"
---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}
{:tip: .tip}

# 연결 구성
{: #connection-configuration}

{{site.data.keyword.composeForRedis_full}} 데이터베이스 연결은 2개의 HAProxy 포털에서 관리합니다. 각 포털에는 64MB의 메모리가 있습니다.  

두 개의 포털이 있으므로 포털 중 하나에 연결할 수 없게 되는 경우에도 애플리케이션에서 계속 연결할 수 있습니다. 클라이언트 측의 장애 복구는 애플리케이션 디자이너의 책임입니다. 일부 etcd 드라이버에서는 여러 연결 문자열과 단계별 장애 복구를 자동으로 처리합니다. 장애 복구 오류를 완전히 처리하는 드라이버로 작업하지 않는 한 다음을 수행해야 합니다.

* 해당 연결 구성에서 다중 엔드포인트를 허용하는 드라이버로 작업합니다.
* 데이터베이스를 읽거나 쓰기 위한 애플리케이션 호출이 오류에 적절하게 반응하는지 확인합니다. 옵션에는 다음이 포함됩니다.
  + 오류를 로깅한 후 다시 연결
  + 다시 연결하여 오류의 원인이 된 오퍼레이션 재시도
  + 실패한 오퍼레이션을 큐에 넣고 다시 연결 스케줄

## 전송 중 암호화

프로비저닝 시 {{site.data.keyword.composeForRedis}} HAProxy 포털에서 Let's Encrypt 인증서를 통해 지원되는 TLS/SSL을 사용하도록 설정하는 옵션이 있습니다. TLS/SSL 암호화는 Redis의 기본 옵션이 아닙니다. 대부분의 드라이버에서는 암호화된 연결을 처리할 수 있지만, redis-cli 및 일부 드라이버에서는 추가로 구성하지 않으면 처리할 수 없습니다. TLS/SSL 사용 여부는 특정 유스 케이스에 따라 달라집니다. 자세한 정보는 [외부 애플리케이션 연결](./connecting-external.html) 페이지를 참조하십시오.

## 연결 한계

데이터베이스 연결에서 포털당 연결 한계는 4096개입니다. 연결 한계를 초과하면 서비스가 응답하지 않습니다. 드라이버의 연결 풀링 기능을 통해 애플리케이션에서의 연결을 관리할 수 있습니다.

## 프록시 제한시간

HAProxy 포털에서 서버와 클라이언트 간 연결의 라이프사이클을 관리합니다. 여기에서는 드라이버 작성자 및 {{site.data.keyword.composeForEtcd}} 데이터베이스 연결의 하위 레벨 활동에 관심이 있는 사용자용 참조서로 자세히 설명합니다.

설정 |값 | 적용
----------|-----------|-----------
client | 5m | 클라이언트에서 데이터를 수신확인하거나 전송할 것으로 예상되는 경우.
connect | 4s | 프록시와 서버 간에 연결 중인 경우.
server | 5m | 서버에서 데이터를 수신확인하거나 전송할 것으로 예상되는 경우.
tunnel | 1d | 클라이언트와 서버 간에 양방향 연결이 설정되고 연결이 두 방향 모두에서 비활성 상태로 유지되는 경우.
client-fin | 1h | 한 방향이 이미 종료되어 있는 동안 클라이언트에서 데이터를 수신확인하거나 전송할 것으로 예상되는 경우.
check | 5s | 프록시와 서버를 서로 연결 중일 때 2차 제한시간 확인으로 사용하는 경우.
{: caption="표 1. Redis HAProxy 제한시간" caption-side="top"}




